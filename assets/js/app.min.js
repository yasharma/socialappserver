"use strict";function baseUrl(e){var t=window.location.protocol;return(["localhost","local.mimic.com"].indexOf(window.location.hostname)>-1?t+"//100.100.7.76:8010":t+"//130.211.224.61:8010")+"/api/"+e}function scrollToTop(e){var t=void 0;e&&(t=$("#"+e).prop("offsetTop")),$("html,body").animate({scrollTop:t||0},500)}function scrollToBottom(e){$("."+e).animate({scrollTop:$("."+e).prop("scrollHeight")},"slow")}var mimicTrade=angular.module("mimicTrade",["ui.router","ngMaterial","ngAnimate","ngMessages","ngSanitize","ngFileUpload","LocalStorageModule","ui.bootstrap","oc.lazyLoad","ui.mask","uiCropper"]);mimicTrade.config(["$httpProvider",function(e){var t=["$q","$rootScope","loginSrv",function(e,t,r){return{request:function(e){e.headers=e.headers||{};var t=r.getToken();return t&&(e.headers.Authorization="Token "+t,r.isLogged=!0),e},requestError:function(t){return e.reject(t)},response:function(t){return t||e.when(t)},responseError:function(r){if("onLine"in navigator&&!navigator.onLine)t.$broadcast("server_error",{message:"ERR_INTERNET_DISCONNECTED"});else if(r.status<=0)t.$broadcast("server_error",{message:"ERR_CONNECTION_REFUSED"});else{if(401!==r.status||"Invalid token."!==r.data.detail)return e.reject(r);t.$broadcast("server_error",{message:"Your Session has been expired, please login again to continue.",status_code:401})}}}}];e.interceptors.push(t)}]).config(["$compileProvider",function(e){e.debugInfoEnabled(!1),e.commentDirectivesEnabled(!1),e.cssClassDirectivesEnabled(!1)}]).config(["$mdThemingProvider",function(e){e.definePalette("primary",{50:"21A37B",100:"21A37B",200:"21A37B",300:"21A37B",400:"21A37B",500:"21A37B",600:"21A37B",700:"21A37B",800:"21A37B",900:"21A37B",A100:"14825D",A200:"14825D",A400:"14825D",A700:"21A37B",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),e.theme("default").accentPalette("primary").primaryPalette("primary"),e.enableBrowserColor({theme:"default",palette:"primary",hue:"800"})}]).run(["$location","$rootScope","loginSrv","$state","localStorageService","$timeout","$mdSidenav","alertService","$injector","notificationSrv",function(e,t,r,n,o,i,a,s,c,u){t.$on("$stateChangeStart",function(e,t,i,a,c){s.closeAlert(),!t.authenticate||r.isLogged||o.get("authUser")?o.get("token")&&!t.authenticate&&("Trader"===o.get("authUser").user_type?n.go("strategies"):n.go("customer")):(r.isLogged=!1,n.go("login"),e.preventDefault()),"signup.six"!==t.name&&"newStrategy"!==t.name||loadMyCQGDemoApp()}),t.$on("$stateChangeError",function(t,r,n,o,i,a){if(a.errors)return c.get("$state").go("500"),s.add("danger",a.message),e.path()}),t.clearToken=function(){o.remove("token"),o.remove("authUser"),delete t.user,r.isLogged=!1,n.go("login")},t.toggleSideNav=function(e){a(e).toggle()},t.user=o.get("authUser"),t.$state=n,t.$on("server_error",function(e,r){r.status_code&&401===r.status_code&&t.clearToken(),s.add("danger",r.message)}),t.closeAlert=function(e){s.closeAlert(),delete t.cqg_error},t.manageCount=function(e){e?t.notificationCount=e.records.count:t.notificationCount>0&&(t.notificationCount-=1)},t.goToNotificationUrl=function(r){u.markAsReadNotifications([r.id]).then(function(n){t.manageCount(),e.path(r.url)}).catch(function(e){return s.add("danger",e.message)})}}]);var loadMyCQGDemoApp=function(){var e=document.getElementById("requireDemoApp");e.setAttribute("data-main","/CQGWebAPIJavaScriptClient/scripts/main"),e.setAttribute("src","/CQGWebAPIJavaScriptClient/scripts/require.js")};mimicTrade.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,r){t.when("","/"),t.otherwise(function(e,t){return e.get("$state").go("404"),t.path()}),e.state("home",{url:"/",controller:"homeCtrl",templateUrl:"/user/home/views/home.html",authenticate:!1,data:{pageTitle:"Home"}}).state("404",{templateUrl:"/user/partials/404.html",data:{pageTitle:"404 Page Not Found"},authenticate:!1,resolve:{deps:["$ocLazyLoad",function(e){return e.load({name:"mimicTrade",insertBefore:"#ng_load_plugins_before",files:["/assets/pages/css/error.min.css"]})}]}}).state("500",{templateUrl:"/user/partials/500.html",data:{pageTitle:"Internal Server Error"},authenticate:!1,params:{obj:null},resolve:{deps:["$ocLazyLoad",function(e){return e.load({name:"mimicTrade",insertBefore:"#ng_load_plugins_before",files:["/assets/pages/css/error.min.css"]})}]}})}]),mimicTrade.factory("alertService",["$rootScope","$timeout",function(e,t){var r={};return r.add=function(t,r,n){e.alert={type:t,msg:r}},r.closeAlert=function(t){e.alert=null},r}]),mimicTrade.factory("dialogService",["$rootScope","$timeout","$mdDialog",function(e,t,r){return{show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.show(r.alert().parent(angular.element(document.querySelector(e.container||"body"))).clickOutsideToClose(e.outsideClose||!0).htmlContent(e.content).ariaLabel("Alert Dialog Demo").ok(e.buttonText||"close").targetEvent(e.event))},confirm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.show(r.confirm().title(e.title||"Are you sure you want to proceed!!").parent(angular.element(document.querySelector(e.container||"body"))).htmlContent(e.content).ariaLabel("Confirm Dialog").targetEvent(e.event).ok(e.okText||"Yes").cancel(e.cancelText||"Cancel"))}}}]),mimicTrade.factory("errorHandlerSrv",["localStorageService","$rootScope","$state","RestSvr",function(e,t,r,n){return{error:function(e){t.server_error_message=e}}}]),mimicTrade.factory("RestSvr",["$http","$window","$q",function(e,t,r){return{login:function(t,n){var o={method:"POST",url:baseUrl(t),data:n};return r(function(t,r){e(o).then(function(e){t({user:e.data.user,token:e.data.token})}).catch(function(e){r({errors:!0,status:e.status,message:e.data.message||e.data.detail||"Internal Server Error"})})})},post:function(t,n){var o={method:"POST",url:baseUrl(t),data:n};return r(function(t,r){e(o).then(function(e){t({records:e.data.result})}).catch(function(e){r({errors:!0,data:e.data,message:e.data.message||e.data.detail||"Internal Server Error"})})})},paginate:function(t,n,o){var i={method:"POST",url:baseUrl(t),data:n,params:o};return r(function(t,r){e(i).then(function(e){t({records:e.data.result,paging:e.data.paging})}).catch(function(e){r({errors:!0,data:e.data,message:e.data.message||e.data.detail||"Internal Server Error"})})})},get:function(t,n){var o=angular.isUndefined(n)?null:n;return r(function(r,n){e.get(baseUrl(t),o).then(function(e){r({records:e.data.result})}).catch(function(e){n({errors:!0,data:e.data,message:e.data.message||e.data.detail||"Internal Server Error"})})})}}}]),mimicTrade.directive("mdImage",[function(){return{restrict:"AE",template:'\n\t\t\t<div ng-hide="isComplete" layout="row" layout-sm="column" layout-align="space-around">\n\t\t     \t<md-progress-circular md-diameter="30px" md-mode="indeterminate"></md-progress-circular>\n\t\t   \t</div>\n\t\t   \t<img ng-show="isComplete" ng-src="{{src}}" class="img-responsive" alt="{{src}}">\n\t\t',scope:{src:"="},link:function(e,t){var r="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiPjxkZWZzPjxyYWRpYWxHcmFkaWVudCBpZD0icmFkaWFsLWdyYWRpZW50IiBjeD0iNTAwIiBjeT0iNTAwIiByPSI1MDAiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNkZmRmZGYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM5OTkiLz48L3JhZGlhbEdyYWRpZW50PjwvZGVmcz48cmVjdCBmaWxsPSJ1cmwoI3JhZGlhbC1ncmFkaWVudCkiIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNjAxIDQxNGwwIDBWNTg2bDAgMEgzOTlsMCAwVjQxNGwwIDBINjAxWm0wLTE0SDM5OUExNCAxNCAwIDAgMCAzODUgNDE0djE3M2ExNCAxNCAwIDAgMCAxNCAxNEg2MDFBMTQgMTQgMCAwIDAgNjE1IDU4NlY0MTRhMTQgMTQgMCAwIDAtMTQtMTRoMFpNNTcyIDQ1MGEyMiAyMiAwIDEgMS0yMi0yMkEyMiAyMiAwIDAgMSA1NzIgNDUwWk01ODYgNTcySDQxNFY1NDNsNTAtODYgNTggNzJoMTRsNTAtNDN2ODZaIi8+PC9zdmc+";_.isEmpty(e.src)&&(e.src=r);var n=new Image;n.setAttribute("src",e.src),n.onload=function(t){e.$apply(function(t){return e.isComplete=!0})},n.onerror=function(t){e.$apply(function(){e.isComplete=!0,e.src=r})}}}}]),mimicTrade.directive("pageLoader",[function(){return{restrict:"E",scope:{loading:"=",style:"@?"},transclude:!0,template:'<div ng-hide="loading" layout="column" layout-align="center center" style="{{style}}">\n\t\t\t\t\t\t<md-progress-circular md-mode="indeterminate"></md-progress-circular>\n\t\t\t\t\t\t<p><ng-transclude>Please wait while we are loading ....</ng-transclude></p>\n    \t\t\t\t</div>',link:function(e){_.isEmpty(e.style)&&(e.style="min-height: 350px;")}}}]),mimicTrade.directive("pwCheck",[function(){return{require:"ngModel",scope:{pwCheck:"="},link:function(e,t,r,n){var o="#"+r.pwCheck;t.add(o).on("keyup",function(){e.$apply(function(){var r=t.val()===e.pwCheck;n.$setValidity("pwmatch",r)})})}}}]),mimicTrade.directive("progressButton",[function(){return{restrict:"E",scope:{className:"@",buttonText:"@",loading:"=",buttonType:"@?"},template:'<md-button ng-disabled="loading" type="{{buttonType}}" class="{{className}}" aria-label="{{buttonText}}">\n\t\t\t\t\t\t<span ng-if="!loading">{{buttonText}}</span>\n\t\t\t\t\t\t<div ng-if="loading" layout="row" layout-sm="column" layout-align="space-around">\n\t\t\t\t\t\t\t<md-progress-circular class="md-hue-2" md-diameter="20px" md-mode="indeterminate"></md-progress-circular>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</md-button>',link:function(e){_.isEmpty(e.buttonType)&&(e.buttonType="submit")}}}]),mimicTrade.directive("notificationPanel",["notificationSrv","$location","$rootScope",function(e,t,r){return{restrict:"A",link:function(t,n){e.getNotificationCount().then(r.manageCount).catch(function(e){return console.log(e)}),n.on("click",function(){e.getNotificationList().then(function(e){var r=e.records;e.paging;t.notifications=r}).catch(function(e){return console.log(e)})})},templateUrl:"/user/notifications/directives/notification-panel.html"}}]),mimicTrade.factory("customerSrv",["$rootScope","RestSvr","localStorageService","authSrv","$q","dialogService",function(e,t,r,n,o,i){return{getAllTradersStrategies:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.paginate("strategy/customer/list/",{type:e,page:r,customer_id:n.User().id})},toggleFavorite:function(e){return t.paginate("strategy/favorite/",{strategy_id:e,customer_id:n.User().id})},getStrategyById:function(e){return t.post("strategy/view/customer/"+e+"/",{customer_id:n.User().id})},executeStrategy:function(e){return o(function(r,o){return t.post("strategy/trade/customer/",{strategy_id:e,customer_id:n.User().id}).then(function(e){return r(i.show({content:"<strong>CONFIRMED</strong><p>Your trades have been executed as per the price(s) listed.</p>",buttonText:"BACK TO ALL POSITIONS",outsideClose:!1}))}).catch(function(e){return o(e)})})},closeStrategy:function(e){return t.post("strategy/close/customer/",{strategy_id:e,customer_id:n.User().id})}}}]),mimicTrade.factory("loginSrv",["localStorageService","$rootScope",function(e,t){return{isLogged:!1,initUserSession:function(r,n){this.isLogged=!0,e.set("token",n),e.set("authUser",r),t.user=e.get("authUser")},getToken:function(){return e.get("token")}}}]).factory("authSrv",["loginSrv","localStorageService","$rootScope",function(e,t,r){return{User:function(){if(t.get("authUser"))return t.get("authUser");r.clearToken()}}}]),mimicTrade.factory("notificationSrv",["RestSvr","authSrv",function(e,t){return{getNotificationList:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e.paginate("notification/list/",{page:r,user_id:t.User().id})},markAsReadNotifications:function(t){return e.paginate("notification/status/",{notification_id:t})},deleteNotifications:function(t){return e.paginate("notification/delete/",{notification_id:t})},getNotificationCount:function(){return e.post("notification/unread/count/",{user_id:t.User().id})}}}]),mimicTrade.factory("positionSrv",["$rootScope","RestSvr","localStorageService","authSrv","dialogService","$q",function(e,t,r,n,o,i){return{getAllPositions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.paginate("strategy/trade/customer/list/",{customer_id:n.User().id,page:e,status:r})}}}]),mimicTrade.factory("profileSrv",["RestSvr","authSrv","localStorageService","$rootScope",function(e,t,r,n){return{getUserInfo:function(){return e.post("user/profile/",{id:t.User().id})},saveUserInfo:function(t,r){return e.post("user/profile/update/"+t+"/",r)},updateUserPassword:function(t,r){return e.post("user/change/password/"+t+"/",r)},updateUserState:function(e){r.set("authUser",e),n.user=r.get("authUser")}}}]),mimicTrade.factory("signUpSrv",["localStorageService","$rootScope","$state","RestSvr","errorHandlerSrv",function(e,t,r,n,o){return{saveUserState:function(t){var r=e.get("user");r&&_.assign(r,t),e.set("user",r)},getInfoByKey:function(t){if(t)return e.get(t)},splitName:function(e){if(e)return{lastName:e.split(" ").slice(0,-1).join(" "),firstName:e.split(" ").slice(-1).join(" ")}},byName:function(e,t){return e+" "+t},getInfoByUserId:function(t){if(r.params){var i=e.get("user");if(i)return n.post("user/details/",{id:i.id}).then(function(t){return t.errors?void o.error(t.errors.message):(e.set("user",t.records),e.remove("user_id"),t.records)})}}}}]);var websocket;mimicTrade.constant("WEBSOCKET",{URL:"wss://demoapi.cqg.com:443"}).factory("websocketService",["webSocketSvr","$log","$rootScope","alertService",function(e,t,r,n){return{start:function(n,o,i){try{(websocket=new WebSocket(n)).binaryType="arraybuffer",websocket.onopen=function(){var e={},t=new WebAPI.ClientMsg;e.user_name=o.cqg_id,e.password=o.cqg_password,e.client_app_id="WebApiTest",e.client_version="0.1",e.collapsing_level=0,t.logon=e,sendMessage(t,"Sent: Login: "+o.cqg_id+" : "+o.cqg_password)},websocket.onclose=function(){t.info("Disconnected - status "+this.readyState),websocket=null,r.$broadcast("websocket disconnected",{status:this.readyState}),i("Disconnected - status "+this.readyState)},websocket.onmessage=function(t){var r=processMessage(t.data);e.processResult(r,i)},websocket.onerror=function(t){e.disconnect(),i(t)}}catch(e){console.log(e),i(e)}}}}]).factory("webSocketSvr",["$log","WEBSOCKET","$rootScope","$q",function(e,t,r,n){var o={};return o.processResult=function(e,t){if(!angular.isUndefined(e)){e.logon_result&&t(e.logon_result);for(var r=0;r<e.information_report.length;++r)t(processInformationReport(e.information_report[r]))}},o.symbol_resolution_request=function(e){return console.log(websocket),n(function(t,r){resolveSymbol(e,function(e){e?t(e):r()})})},o.disconnect=function(){websocket?(websocket.close(),websocket=null):e.info("Not connected.")},o}]),mimicTrade.factory("traderSrv",["$rootScope","RestSvr","localStorageService","authSrv","dialogService","$q",function(e,t,r,n,o,i){return{getSubSectors:function(e){return t.post("traders/subsector/",{trader_id:e})},getContracts:function(e){return t.post("traders/instrument/",{sub_sector_id:e})},getSpreads:function(e){return t.post("traders/spreads/",{instrument_id:e})},saveStrategy:function(e){if(e.legs.length>0)for(var r=e.legs.length-1;r>=0;r--)e.legs[r].exchange_name_abbreviation=JSON.stringify(e.legs[r].exchange_name_abbreviation);return t.post("strategies/create/",e)},saveStrategyToLocal:function(e){return r.set("review_strategy",e)},getLocallySavedStrategy:function(){return r.get("review_strategy")},emptyStrategyStorage:function(){return r.remove("review_strategy")},getMyStrategies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.paginate("strategy/list/",{trader_id:n.User().id},{page:e,status:r})},getStrategyById:function(e){return t.post("strategy/view/"+e+"/",{trader_id:n.User().id})},saveStrategyComments:function(e,r){return t.post("strategy/comment/",{trader_id:n.User().id,strategy_id:r,comment:e})},getStrategyComments:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.paginate("strategy/comment/listing/",{trader_id:n.User().id,strategy_id:e,page:r})},archivedStrategy:function(e,r){return i(function(n,i){o.confirm({title:"Confirm ?",content:"<p>This will notify all active followers and remove the <br /> strategy from the marketplace</p>",okText:"Yes, Remove This Strategy",event:e}).then(function(){return n(t.post("strategy/remove/",{strategy_id:r}))},function(){return i("You have cancelled the dialog!!")})})}}}]),mimicTrade.controller("closeStrategyCtrl",["$scope","$state","alertService","customerSrv","strategy","$location",function(e,t,r,n,o,i){e.position=!1;var a=i.search();a&&"position"===a.action&&(e.position=!0),e.strategy=o.records,e.execute=function(){return n.executeStrategy(e.strategy.id).then(function(e){return t.go("customerStrategies")}).catch(function(e){return r.add("danger",e.message)})},e.close=function(){return n.closeStrategy(e.strategy.id).then(function(e){r.add("success","Strategy has been closed successfully!"),t.go("customer")}).catch(function(e){return r.add("danger",e.message)})},e.backlink=function(){e.position?t.go("customer"):t.go("customerStrategies")}}]),mimicTrade.controller("customerCtrl",["$scope","$state","alertService","customerSrv","$timeout","strategies","authSrv",function(e,t,r,n,o,i,a){e.paging={page:1},e.strategies=i.records,e.paging=i.paging,e.filters=["All Markets","Grains","Energies","Indicies","Forex","Other"],e.whenSelected=e.whenSelected||"All Markets",e.filter=function(t){e.whenSelected=t,s(t,e.paging.page)};var s=function(t,i){e.strategies=!1,n.getAllTradersStrategies(t,i).then(function(t){var r=t.records,n=t.paging;o(function(){e.strategies=r,e.paging=n},500)}).catch(function(e){return r.add("danger",e.message)})};e.pageChanged=function(){return s(e.whenSelected,e.paging.page)},e.getMyFavorites=function(t){e.whenSelected=t,s(e.whenSelected,e.paging.page)},e.toggleFavorite=function(t,o,i){return n.toggleFavorite(t).then(function(t){e.strategies[i].favorite=!o,"fav"===e.whenSelected&&e.strategies.splice(i,1),r.add("success","Strategy marked as "+(o?"unfavorite":"favorite")+" successfully!")}).catch(function(e){return r.add("danger",e.message)})}}]),mimicTrade.controller("customerViewStrategyCtrl",["$scope","$state","alertService","customerSrv","strategy","traderSrv","$location",function(e,t,r,n,o,i,a){e.position=!1;var s=a.search();s&&"position"===s.action&&(e.position=!0),e.strategy=o.records,e.comments=[],e.commentLoader=!1;var c=function(t,n){return i.getStrategyComments(e.strategy.id,t).then(function(t){e.comments=e.comments.concat(t.records),e.paging=t.paging,e.commentLoader=!0,n&&scrollToBottom("commentList")}).catch(function(e){return r.add("danger",e.message)})};c(),t.current={data:{pageTitle:e.strategy.title}},e.loadMore=function(){e.commentLoader=!1,c(e.paging.page+1,!0)},e.toggleFavorite=function(t){return n.toggleFavorite(e.strategy.id).then(function(n){e.strategy.favorite=!t,r.add("success","Strategy marked as "+(t?"unfavorite":"favorite")+" successfully!")}).catch(function(e){return r.add("danger",e.message)})},e.execute=function(){return n.executeStrategy(e.strategy.id).then(function(e){return t.go("customerStrategies")}).catch(function(e){return r.add("danger",e.message)})}}]),mimicTrade.controller("dashboardCtrl",["$scope","$state","RestSvr","$rootScope","$location","$mdDialog","localStorageService",function(e,t,r,n,o,i,a){console.log("dashboardCtrl"),console.log(n.user)}]),mimicTrade.controller("generatePasswordCtrl",["$scope","$state","RestSvr","$rootScope","dialogService","$timeout","loginSrv","alertService","$location",function(e,t,r,n,o,i,a,s,c){var u=c.search();u.id?e.generatePassword=function(n){n&&(e.isLoading=!0,r.post("trader/change/password/"+u.id+"/",{password:e.user.password}).then(function(r){c.search(""),e.isLoading=!1,o.show({content:"<div>Your Password has Generated successfully, you can login !!</div>",buttonText:"Login"}).then(function(e){return t.go("login")})}).catch(function(e){return s.add("danger",e.message)}).then(function(){return e.isLoading=!1}))}:t.go("login")}]),mimicTrade.controller("homeCtrl",["$scope","$state","RestSvr","$rootScope","$location","$mdDialog","localStorageService",function(e,t,r,n,o,i,a){function s(e,t){e.answer=function(e){t.hide(e)}}var c=o.search();c&&c.email_verify&&c.uid&&i.show({controller:s,templateUrl:"./user/partials/email_verification_dialog.html",parent:angular.element(document.body),clickOutsideToClose:!0}).then(function(e){a.set("user",{id:c.uid}),t.go("signup.agreement")}),s.$inject=["$scope","$mdDialog"]}]),mimicTrade.controller("loginCtrl",["$scope","$state","RestSvr","$rootScope","$log","$timeout","loginSrv","alertService",function(e,t,r,n,o,i,a,s){e.login=function(n){n&&(e.isLoading=!0,r.login("login/",e.user).then(function(e){a.initUserSession(e.user,e.token),"Trader"===e.user.user_type?t.go("strategies"):t.go("customer")}).catch(function(e){return s.add("danger",e.message,!0)}).then(function(){return e.isLoading=!1}))},e.forgot=function(t,n){t&&(e.isLoading=!0,r.post("forgotpassword/",{email:e.user.email}).then(function(t){e.isLoading=!1,s.add("success","Kindly check your inbox/spam folder for further instructions!!"),n.$setPristine(),n.$setUntouched(),i(function(){return e.user={}})}).catch(function(e){return s.add("danger",e.message)}).then(function(){return e.isLoading=!1}))}}]),mimicTrade.controller("notificationCtrl",["$scope","$state","notifications","notificationSrv","alertService","dialogService","$rootScope",function(e,t,r,n,o,i,a){var s=void 0;e.notifications=r.records,e.paging=r.paging,e.selected=[];var c=function(t){return n.getNotificationList(t).then(function(t){var r=t.records,n=t.paging;e.notifications=r,e.paging=n}).catch(function(e){return console.log(e)})};e.pageChanged=function(){return c(e.paging.page)},e.toggle=function(e,t){var r=t.indexOf(e);r>-1?t.splice(r,1):t.push(e)},e.exists=function(e,t){return t.indexOf(e)>-1},e.isChecked=function(){return e.selected.length===e.notifications.length},e.isIndeterminate=function(){return 0!==e.selected.length&&e.selected.length!==e.notifications.length},e.toggleAll=function(){e.selected.length===e.notifications.length?e.selected=[]:(0===e.selected.length||e.selected.length>0)&&(e.selected=e.notifications.map(function(e){return e.id}).slice(0))},e.openMenu=function(e,t){s=t,e.open(t)},e.markAsRead=function(r){e.selected.length>0?i.confirm({title:"Confirm ?",content:"Are you sure you would like to procceed with multiple selection?",event:r}).then(function(){return n.markAsReadNotifications(e.selected)}).then(function(e){return t.reload()}).catch(function(){return console.log("action cancelled!")}):o.add("danger","Please select atleast one notification")},e.delete=function(r){e.selected.length>0?i.confirm({title:"Confirm ?",content:"Are you sure you would like to remove multiple notifications?",event:r}).then(function(){return n.deleteNotifications(e.selected)}).then(function(){return a.manageCount()}).then(function(e){return t.reload()}).catch(function(){return console.log("action cancelled!")}):o.add("danger","Please select atleast one notification")}}]),mimicTrade.controller("passwordResetCtrl",["$scope","$state","RestSvr","$rootScope","dialogService","$timeout","loginSrv","alertService","$location",function(e,t,r,n,o,i,a,s,c){var u=c.search();u.email?e.resetPassword=function(n){n&&(e.isLoading=!0,r.post("resetpassword/",{email:u.email,password:e.user.password}).then(function(r){c.search(""),e.isLoading=!1,o.show({content:"<div>Your Password has Reset successfully, you can login !!</div>",buttonText:"Login"}).then(function(e){return t.go("login")})}).catch(function(e){return s.add("danger",e.message)}).then(function(){return e.isLoading=!1}))}:t.go("login")}]),mimicTrade.controller("positionCtrl",["$scope","$state","RestSvr","$rootScope","$location","positions","positionSrv","alertService","$timeout",function(e,t,r,n,o,i,a,s,c){e.positions=i.records,e.paging=i.paging,e.filters=["All position","Grains","Energies","Indicies","Forex","Other","Closed Positions"],e.whenSelected=e.whenSelected||"All position";var u=function(t,r){e.positions=!1,a.getAllPositions(t,r).then(function(t){var r=t.paging,n=t.records;c(function(){e.positions=n,e.paging=r},500)}).catch(function(e){return s.add("danger",e.message)})};e.filter=function(t){e.whenSelected=t,u(e.paging.page,t)},e.pageChanged=function(){return u(e.paging.page)}}]),mimicTrade.controller("profileCtrl",["$scope","$state","RestSvr","$rootScope","Upload","profileSrv","$timeout","alertService","userProfile",function(e,t,r,n,o,i,a,s,c){e.myImage="",e.myCroppedImage="",e.newImageSelected=!1,e.profile=c.records,e.profile.profile_update_img=e.profile.profile_img,e.saveUserProfile=function(t){t&&(e.isLoading=!0,i.saveUserInfo(e.profile.id,e.profile).then(function(e){scrollToTop(),s.add("success","Your profile update successfully!")}).catch(function(e){return s.add("danger",e.data)}).then(function(){return e.isLoading=!1}))},e.changeAvatar=function(t,r){t&&_.isEmpty(r.profile_update_img.$error)&&o.isFile(e.profile.profile_update_img)&&(e.isLoading=!0,o.upload({url:baseUrl("user/profile/pic/update/"+e.profile.id+"/"),method:"POST",data:{profile_img:o.dataUrltoBlob(e.myCroppedImage,e.profile.profile_update_img.name)}}).then(function(t){t.data.result&&(e.profile.profile_img=t.data.result.profile_img,e.newImageSelected=!1),i.updateUserState(e.profile),s.add("success","Your profile image update successfully!")}).catch(function(e){return s.add("danger",e.data)}).finally(function(){return e.isLoading=!1}))},e.isImageSelected=function(t,r){if(e.newImageSelected=!0,t){var n=new FileReader;n.onload=function(t){e.$apply(function(e){e.myImage=t.target.result})},n.readAsDataURL(t)}},e.updatePassword=function(t,r){t&&(e.isLoading=!0,i.updateUserPassword(e.profile.id,e.account).then(function(t){r.$setPristine(),r.$setUntouched(),a(function(){return e.account={}}),s.add("success","Your password has update successfully!")}).catch(function(e){r.password.$setValidity("wrong",!1)}).then(function(){return e.isLoading=!1}))},e.clear=function(e){e.password.$setValidity("wrong",!0)},e.getTabData=function(t){3===t&&r.get("settings/"+e.profile.id+"/").then(function(t){return e.settings=t.records}).catch(function(e){return s.add("danger",e.message)})},e.updateSettings=function(){e.isLoading=!0,r.post("settings/"+e.settings.id+"/",e.settings).then(function(e){return s.add("success","Account settings has been update successfully!")}).catch(function(e){return s.add("danger",e.message)}).then(function(){return e.isLoading=!1})}}]),mimicTrade.controller("signupCtrl",["$scope","$state","RestSvr","$rootScope","signUpSrv","$location","webSocketSvr","localStorageService","alertService","websocketService","$log",function(e,t,r,n,o,i,a,s,c,u,l){function d(e){l.info("Balance info received: "+e.msg_id),c.add("success","Balance info received!! Connecting to server ...");var t=e.last_statement_balances_report,r=_.some(t.balance,p),n=o.getInfoByKey("user");r?g({session_token:m,brokerageMetadataData:t.balance,user:n,onboarding:r}):f(n),s.remove("user")}function g(n){r.post("update/user/details/",n).then(function(e){return t.go("signup.confirm")}).catch(function(e){return c.add("danger",e.message)}).then(function(){return e.isLoading=!1})}function f(n){r.post("failed/onboarding/",{email:n.email}).then(function(e){return t.go("signup.failed")}).catch(function(e){return c.add("danger",e.message)}).then(function(){return e.isLoading=!1})}function p(e){return e.balance>1e4}var m=void 0;e.$on("$viewContentLoaded",function(){"signup.six"==t.current.name&&require(["ProtoBuf"],function(e){"WebSocket"in window?"ArrayBuffer"in window?initPage():l.info("ArrayBuffer is not supported"):l.info("WebSockets are not supported")})}),e.user={},"signup.two"==t.current.name?o.getInfoByUserId().then(function(t){e.user=t}):o.getInfoByKey("user")&&(e.user=o.getInfoByKey("user")),e.showHints=!0,e.agreementTerms=function(e){e&&t.go("signup.two")},e.SignUpStepFirst=function(n,o){n&&(e.isLoading=!0,r.post("registration/",e.user).then(function(e){return t.go("thankyou")}).catch(function(e){e.data&&angular.forEach(e.data,function(e,t){o[t].$setValidity("unique",!1)})}).then(function(){return e.isLoading=!1}))},e.SignUpStepTwo=function(r){r?(o.saveUserState(e.user),t.go("signup.three")):e.showHints=!1},e.SignUpStepThree=function(r){r&&(o.saveUserState(e.user),t.go("signup.four"))},e.skipStepThree=function(){e.user&&o.saveUserState(e.user),t.go("signup.four")},e.signStepFour=function(r){r&&(e.user.password===e.user.confirm_password?(o.saveUserState(e.user),t.go("signup.five")):c.add("danger","Password and confirm should match"))},e.signStepFive=function(r){r&&(e.user&&o.saveUserState(e.user),t.go("signup.six"))},e.signStepSix=function(t){t&&(e.isLoading=!0,u.start("wss://demoapi.cqg.com:443",e.user,function(t){var r=t.result_code==WebAPI.LogonResult.ResultCode.SUCCESS;if(Boolean(r)){e.$apply(function(){c.add("success","Authentication successful!! Rquesting Balance Report...")}),l.info("baseTime: "+t.base_time);var n=new Date(Date.parse(t.base_time+"Z"));l.info("SUCCESSFUL logon Result:"+t.text_message),l.info("baseTime: "+n),l.info("Session Token: "+t.session_token),m=t.session_token,requestBalance()}else t.last_statement_balances_report?d(t):(l.info("FAILED logon Result:"+t.text_message),e.$apply(function(){c.add("danger",t.text_message||"Unable to Create connection, try again later!"),e.isLoading=!1}),a.disconnect())}))},e.clear=function(e,t){t[e].$setValidity("unique",!0)},e.clearCQGError=function(e,t){t[e].$setValidity("servererror",!0)}}]),mimicTrade.controller("strategiesBkpCtrl",["$scope","$state","RestSvr","$rootScope","$location","$mdDialog","localStorageService","authSrv","alertService",function(e,t,r,n,o,i,a,s,c){e.today=new Date,e.monthsArr=function(e,t){var r=[],n=moment(e);for(t=moment(t);n<=t;)r.push(moment(n).format("MMM DD")),n=moment(n).add(1,"days");return r}(e.today,moment(e.today).add(1,"months")),e.strikePriceRange=_.range(1100,2020,20),e.strategy={},e.strategy.legs=[],e.straddle_legs=[1,2,4,5],e.createNewStrategy=function(n){if(n){var o=s.User();_.assign(e.strategy,{user_id:o.id}),r.post("strategies/create/",e.strategy).then(function(e){e.error?c.add("danger",e.error.message):t.go("user.strategies")})}}}]),mimicTrade.controller("reviewStrategyCtrl",["$scope","$state","alertService","traderSrv","$timeout",function(e,t,r,n,o){var i=n.getLocallySavedStrategy();i?(e.strategy=i,e.postStrategy=function(){e.isLoading=!0,r.add("success","Please wait!! processing ..."),n.saveStrategy(e.strategy).then(function(e){r.add("success","strategy saved successfully, once its approved by admin we will notify you!"),o(function(){n.emptyStrategyStorage(),t.go("user.strategies")})}).catch(function(e){return r.add("danger",e.message)}).then(function(){return e.isLoading=!1})},e.returnBack=function(){return t.go("newStrategy")}):r.add("danger","No local storage data found!!")}]),mimicTrade.controller("traderCtrl",["$scope","traderSrv","alertService","strategiesList","$timeout","$log","$state",function(e,t,r,n,o,i,a){e.filters=["all","pending","available","trading","archived"],e.whenSelected=e.whenSelected||"all",e.strategies=n.records,e.paging=n.paging,e.maxSize=10,e.forceEllipses=!0,e.filter=function(t){e.strategies=!1,e.whenSelected=t,s(e.paging.page,t)},e.pageChanged=function(){return s(e.paging.page,e.whenSelected)};var s=function(n,i){return t.getMyStrategies(n,i).then(function(t){var r=t.records,n=t.paging;o(function(){e.strategies=r,e.paging=n},500)}).catch(function(e){return r.add("danger",e.message)})};e.convertToJSON=function(e){return e&&"string"==typeof e?JSON.parse(e):[]},e.removeStrategy=function(e,n,o){if("Archived"===o)return scrollToTop(),void r.add("success","Strategy has already archived!");t.archivedStrategy(e,n).then(function(e){a.reload(),r.add("success","Strategy has been archived successfully")}).catch(function(e){return i.info(e)})}}]),mimicTrade.controller("traderStrategiesCtrl",["$scope","$state","RestSvr","traderSrv","authSrv","alertService","websocketService","$log","webSocketSvr","$timeout","$q","$rootScope","$location",function(e,t,r,n,o,i,a,s,c,u,l,d,g){function f(){var t={cqg_id:"MIMICWEBAPI",cqg_password:"pass"};a.start("wss://demoapi.cqg.com:443",t,function(t){var r=t.result_code==WebAPI.LogonResult.ResultCode.SUCCESS;if(Boolean(r)){e.$apply(function(){i.add("success","Authentication successful!! Connected")}),w=Date.parse(t.base_time);var n=new Date(Date.parse(t.base_time+"Z"));s.info("SUCCESSFUL logon Result:"+t.text_message),s.info("rawBaseTime: "+n),s.info("Session Token: "+t.session_token);t.session_token}else t.symbol_resolution_report?p(t.symbol_resolution_report):t.symbols_by_underlying_report?m(t.symbols_by_underlying_report):t.child_symbols_report?S(t.child_symbols_report):(s.info("FAILED logon Result::"+t.text_message),d.$apply(function(){i.add("danger",t.text_message||"Connection cloesd by remote host, will reconnect in a moment, otherwise try to refresh page once")}),c.disconnect())})}function p(e){e.contract_metadata&&symbols_by_underlying_request(e.contract_metadata.contract_id)}function m(e){e.symbol&&(y=e.symbol,v())}function v(){y.length>0?h(y.pop()):(e.strike=C,e.expDates=b,e.$apply(function(){return e.processSymbol=!1}))}function h(e){e&&child_symbols_request(e.id)}function S(e){if(e){var t=e.symbol,r=t.length;if(r>0)for(var n=0;n<r;n++)if(!angular.isUndefined(t[n].contract_metadata)){C[t[n].contract_metadata.strike]=t[n].contract_metadata.strike;var o=w+t[n].contract_metadata.last_trading_date.low,i=moment(o).format("MMM DD");b[i]=i}}u(function(){return v()},1e3)}var y=void 0,w=void 0,C={},b={};e.$on("$viewContentLoaded",function(){"newStrategy"==t.current.name&&require(["ProtoBuf"],function(e){"WebSocket"in window?"ArrayBuffer"in window?initPage():s.info("ArrayBuffer is not supported"):s.info("WebSockets are not supported")}),e.fetchSubSectors(),u(function(){return f()})});var T=n.getLocallySavedStrategy();e.strategy={},T&&(e.strategy=T,e.strategy.product_category&&u(function(){return e.fetchContracts(e.strategy.product_category,!0)}),e.strategy.instrument&&u(function(){return e.fetchSpreads(e.strategy.instrument,!0)}));var $=o.User();e.today=new Date,e.monthsArr=function(e,t){var r=[],n=moment(e);for(t=moment(t);n<=t;)r.push(moment(n).format("MMM DD")),n=moment(n).add(1,"days");return r}(e.today,moment(e.today).add(1,"months")),e.strikePriceRange=_.range(1100,2020,20),T||(e.strategy.legs=[]),e.straddle_legs=[1,2,4,5],e.createNewStrategy=function(r){r&&(e.isLoading=!0,_.assign(e.strategy,{user_id:$.id}),n.saveStrategyToLocal(e.strategy),e.isLoading=!1,t.go("reviewStrategy"))},e.fetchSubSectors=function(){return n.getSubSectors($.id).then(function(t){var r=t.records;return e.sub_sectors=r}).catch(function(e){return i.add("danger",e.message)})},e.fetchContracts=function(t,r){return e.strategy.hasOwnProperty("instrument")&&!r&&delete e.strategy.instrument,n.getContracts(t.sub_sector_id).then(function(t){var r=t.records;return e.instruments=r}).catch(function(e){return i.add("danger",e.message)})},e.fetchSpreads=function(t,r){e.strategy.hasOwnProperty("spread_definitions")&&!r&&delete e.strategy.spread_definitions,n.getSpreads(t.id).then(function(t){var r=t.records;return e.spread_definitions=r}).catch(function(e){return i.add("danger",e.message)})},e.legsOpt=[["BUY","SELL"],["CALL","PUT"]],e.symbol_resolution_report=function(t){e.processSymbol=!0,C={},b={},c.symbol_resolution_request(t)},e.removeSelected=function(t){e.strategy.legs&&e.strategy.legs.splice(t,1)},d.$on("websocket disconnected",function(e,t){i.add("success","Reconnecting .... !!"),u(function(){return f()},1e3)})}]),mimicTrade.controller("viewStrategyCtrl",["$scope","traderSrv","alertService","$state","strategy","dialogService","$log",function(e,t,r,n,o,i,a){e.strategy=o.records,e.currentDate=new Date,e.comments=[],e.commentLoader=!1;var s=function(n,o){return t.getStrategyComments(e.strategy.id,n).then(function(t){e.comments=e.comments.concat(t.records),e.paging=t.paging,e.commentLoader=!0,o&&scrollToBottom("commentList")}).catch(function(e){return r.add("danger",e.message)})};s(),n.current={data:{pageTitle:e.strategy.title}},e.update=function(n){n?t.saveStrategyComments(n,e.strategy.id).then(function(t){return e.comments.unshift(t.records)}).catch(function(e){return r.add("danger",e.message)}).then(function(){return e.comment=""}):r.add("danger","Please add comment!")},e.removeStrategy=function(o){t.archivedStrategy(o,e.strategy.id).then(function(e){n.go("strategies"),r.add("success","Strategy has been archived successfully")}).catch(function(e){return a.info(e)})},e.loadMore=function(){e.commentLoader=!1,s(e.paging.page+1,!0)}}]),mimicTrade.config(["$stateProvider",function(e){e.state("CQG",{url:"/cqg",controller:"cqgWebAPIController",templateUrl:"/user/CQGWebAPI/views/cqg.html",authenticate:!1,data:{pageTitle:"CQG WebAPI Client"},resolve:{deps:["$ocLazyLoad",function(e){return e.load({name:"mimicTrade",insertBefore:"#ng_load_plugins_before",files:["/user/CQGWebAPI/controllers/cqgWebAPIController.js","/user/CQGWebAPI/factories/webSocketSrv.js","/CQGWebAPIJavaScriptClient/scripts/realTime.js","/CQGWebAPIJavaScriptClient/scripts/account.js","/CQGWebAPIJavaScriptClient/scripts/auxiliary.js","/CQGWebAPIJavaScriptClient/scripts/sessionInfo.js","/CQGWebAPIJavaScriptClient/scripts/timeAndSales.js","/CQGWebAPIJavaScriptClient/scripts/timeBars.js","/CQGWebAPIJavaScriptClient/scripts/webapi.js","/CQGWebAPIJavaScriptClient/scripts/ui.js"]})}]}})}]),mimicTrade.config(["$stateProvider",function(e){var t=["customerSrv","$stateParams",function(e,t){return e.getStrategyById(t.id)}];e.state("customerStrategies",{url:"/customers/strategies",controller:"customerCtrl",templateUrl:"/user/customers/views/customer_strategies_list.html",authenticate:!0,data:{pageTitle:"Strategies Listing"},resolve:{strategies:["customerSrv",function(e){return e.getAllTradersStrategies()}]}}).state("customerViewStrategy",{url:"/customers/view-strategy/:id?action",controller:"customerViewStrategyCtrl",templateUrl:"/user/customers/views/customer_view_strategy.html",authenticate:!0,data:{pageTitle:"View Strategy"},resolve:{strategy:t}}).state("closeStrategy",{url:"/customers/close-strategy/:id?action",controller:"closeStrategyCtrl",templateUrl:"/user/customers/views/close_strategy.html",authenticate:!0,data:{pageTitle:"Close Strategy"},resolve:{strategy:t}})}]),mimicTrade.config(["$stateProvider",function(e){e.state("user",{url:"/dashboard",controller:"dashboardCtrl",templateUrl:"/user/dashboard/views/dashboard.html",authenticate:!0,data:{pageTitle:"Positions"}})}]),mimicTrade.config(["$stateProvider",function(e){e.state("generatePassword",{url:"/generate-password",controller:"generatePasswordCtrl",templateUrl:"/user/generatePassword/views/generate_password.html",authenticate:!1,data:{pageTitle:"Create My MIMIC Password"}})}]),mimicTrade.config(["$stateProvider",function(e){e.state("login",{url:"/login",controller:"loginCtrl",templateUrl:"/user/login/views/login.html",authenticate:!1,data:{pageTitle:"Login"}})}]),mimicTrade.config(["$stateProvider",function(e){e.state("notifications",{url:"/notifications",controller:"notificationCtrl",templateUrl:"/user/notifications/views/notifications.html",data:{pageTitle:"Notifications"},resolve:{deps:["$ocLazyLoad",function(e){return e.load({name:"mimicTrading",insertBefore:"#ng_load_plugins_before",files:["../assets/apps/css/inbox.min.css"]})}],notifications:["notificationSrv",function(e){return e.getNotificationList()}]},authenticate:!0})}]),mimicTrade.config(["$stateProvider",function(e){e.state("passwordReset",{url:"/reset-password",controller:"passwordResetCtrl",templateUrl:"/user/passwordReset/views/password_reset.html",authenticate:!1,data:{pageTitle:"Reset My Password"}})}]),mimicTrade.config(["$stateProvider","$urlRouterProvider",function(e,t){var r=["positionSrv",function(e){return e.getAllPositions()}];e.state("customer",{url:"/positions/list",controller:"positionCtrl",templateUrl:"/user/positions/views/list.html",authenticate:!0,data:{pageTitle:"Positions"},resolve:{positions:r}}).state("customer.grid",{url:"^/positions/grid",templateUrl:"/user/positions/views/grid.html",authenticate:!0,data:{pageTitle:"Positions"},resolve:{positions:r}})}]),mimicTrade.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,r){e.state("profile",{url:"/profile",controller:"profileCtrl",templateUrl:"/user/profile/views/profile.html",authenticate:!0,resolve:{deps:["$ocLazyLoad",function(e){return e.load({name:"mimicTrade",insertBefore:"#ng_load_plugins_before",files:["../assets/pages/css/profile.min.css"]})}],userProfile:["profileSrv",function(e){return e.getUserInfo()}]},data:{pageTitle:"My Profile"}})}]),mimicTrade.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("signup",{url:"/signup",controller:"signupCtrl",templateUrl:"/user/signup/views/signup.html",authenticate:!1,data:{pageTitle:"Signup"}}).state("signup.agreement",{url:"/agreement",controller:"signupCtrl",templateUrl:"/user/signup/views/agreement.html",authenticate:!1,data:{pageTitle:"Agreement and Disclaimer"}}).state("signup.two",{url:"/step-2",controller:"signupCtrl",templateUrl:"/user/signup/views/step_2.html",authenticate:!1,data:{pageTitle:"Signup"}}).state("signup.three",{url:"/step-3",controller:"signupCtrl",templateUrl:"/user/signup/views/step_3.html",authenticate:!1,data:{pageTitle:"Signup customer on-boarding"}}).state("signup.four",{url:"/step-4",controller:"signupCtrl",templateUrl:"/user/signup/views/step_4.html",authenticate:!1,data:{pageTitle:"Signup customer on-boarding"}}).state("signup.five",{url:"/step-5",controller:"signupCtrl",templateUrl:"/user/signup/views/step_5.html",authenticate:!1,data:{pageTitle:"Signup customer on-boarding"}}).state("signup.six",{url:"/step-6",controller:"signupCtrl",templateUrl:"/user/signup/views/step_6.html",authenticate:!1,data:{pageTitle:"Signup customer on-boarding"},resolve:{deps:["$ocLazyLoad",function(e){return e.load({name:"mimicTrade",insertBefore:"#ng_load_plugins_before",files:["/CQGWebAPIJavaScriptClient/scripts/realTime.js","/CQGWebAPIJavaScriptClient/scripts/account.js","/CQGWebAPIJavaScriptClient/scripts/auxiliary.js","/CQGWebAPIJavaScriptClient/scripts/sessionInfo.js","/CQGWebAPIJavaScriptClient/scripts/timeAndSales.js","/CQGWebAPIJavaScriptClient/scripts/timeBars.js","/CQGWebAPIJavaScriptClient/scripts/webapi.js","/CQGWebAPIJavaScriptClient/scripts/ui.js"]})}]}}).state("signup.confirm",{url:"/confirm",templateUrl:"/user/signup/views/signup_confirmation.html",authenticate:!1,data:{pageTitle:"Signup Confirmation"}}).state("signup.failed",{url:"/failed",templateUrl:"/user/signup/views/signup_failed.html",authenticate:!1,data:{pageTitle:"Signup Confirmation"}}).state("thankyou",{url:"/thank-you",templateUrl:"/user/signup/views/thankyou.html",authenticate:!1,data:{pageTitle:"Thank You"}})}]),mimicTrade.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("user.positions",{url:"/positions",controller:"dashboardCtrl",templateUrl:"/user/dashboard/views/positions.html",authenticate:!0,data:{pageTitle:"Positions"}}).state("user.strategies",{url:"/strategies",controller:"dashboardCtrl",templateUrl:"/user/dashboard/views/strategies.html",authenticate:!0,data:{pageTitle:"Strategies"}})}]),mimicTrade.config(["$stateProvider",function(e){e.state("strategies",{url:"/traders/strategies",controller:"traderCtrl",templateUrl:"/user/traders/views/trader_strategies_list.html",authenticate:!0,data:{pageTitle:"Strategies Listing"},resolve:{strategiesList:["traderSrv",function(e){return e.getMyStrategies()}]}}).state("newStrategy",{url:"/traders/create-strategy",controller:"traderStrategiesCtrl",templateUrl:"/user/traders/views/trader_create_strategy.html",authenticate:!0,data:{pageTitle:"Create New Strategy"},resolve:{deps:["$ocLazyLoad",function(e){return e.load({name:"mimicTrade",insertBefore:"#ng_load_plugins_before",files:["/CQGWebAPIJavaScriptClient/scripts/realTime.js","/CQGWebAPIJavaScriptClient/scripts/account.js","/CQGWebAPIJavaScriptClient/scripts/auxiliary.js","/CQGWebAPIJavaScriptClient/scripts/sessionInfo.js","/CQGWebAPIJavaScriptClient/scripts/timeAndSales.js","/CQGWebAPIJavaScriptClient/scripts/timeBars.js","/CQGWebAPIJavaScriptClient/scripts/webapi.js","/CQGWebAPIJavaScriptClient/scripts/ui.js"]})}]}}).state("reviewStrategy",{url:"/traders/review-startegy",controller:"reviewStrategyCtrl",templateUrl:"/user/traders/views/review_strategy.html",authenticate:!0,data:{pageTitle:"Review Strategies"}}).state("viewStrategy",{url:"/traders/view-strategy/:id",controller:"viewStrategyCtrl",templateUrl:"/user/traders/views/trader_view_strategy.html",authenticate:!0,data:{pageTitle:"View Strategy"},resolve:{strategy:["traderSrv","$stateParams",function(e,t){return e.getStrategyById(t.id)}]}})}]);
//# sourceMappingURL=../maps/app.min.js.map
